<!DOCTYPE html>
<html>
  <head>
    <title>Routing - Solid Layer Documentation</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="../.docs-compiled/assets/css/font-awesome.css">
    <link rel="stylesheet" href="../.docs-compiled/assets/css/slayer.css">
  </head>
  <body>
    <nav class="navbar">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="navbar-brand" href="#">S.layer</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li class="nav-link active-slayer"><a href="#">Documentation</a></li>
                <li class="nav-link"><a href="#">Forum</a></li>
                <li>
                    <form class="navbar-form navbar-left">
                        <div class="form-group has-feedback">
                            <input type="text" class="form-control" placeholder="Search">
                            <i class="glyphicon glyphicon-search form-control-feedback"></i>
                        </div>
                    </form>
                </li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container -->
</nav>    <div class="container">
      <div class="row">
        <div class="col-md-3 version">
          <div class="btn-group">
  <button type="button" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    v1.4.0 <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a href="#">v1.4.1</a></li>
    <li><a href="#">v1.4.2</a></li>
    <li><a href="#">v1.4.3</a></li>
    <li><a href="#">v1.4.4</a></li>
  </ul>
</div>
        </div>
        <div class="col-md-9">
            <h1>Routing</h1>
        </div>
      </div>
      <div class="row">
        <div class="sidebar col-md-3">
            <ul class="sidebar-level-1"><li class="menu-level-1"><div class="nav-menu-title">Prologue</div><ul class="sidebar-level-2"><li class="menu-level-2"><a href="prologue-change-log.html">Change Log</a></li><li class="menu-level-2"><a href="prologue-contribution-guide.html">Contribution Guide</a></li></ul></li><li class="menu-level-1"><div class="nav-menu-title">Setup</div><ul class="sidebar-level-2"><li class="menu-level-2"><a href="index.html">Installation</a></li><li class="menu-level-2"><a href="setup-configuration.html">Configuration</a></li></ul></li><li class="menu-level-1"><div class="nav-menu-title">Modular-MVC</div><ul class="sidebar-level-2"><li class="menu-level-2"><a href="modular-mvc-module.html">Module</a></li><li class="menu-level-2"><a href="modular-mvc-controller.html">Controller</a></li><li class="menu-level-2"><a href="modular-mvc-view.html">View</a></li><li class="menu-level-2"><a href="modular-mvc-model.html">Model</a></li></ul></li><li class="menu-level-1"><div class="nav-menu-title">Supporting Structure</div><ul class="sidebar-level-2"><li class="menu-level-2"><a href="supporting-structure-error-handler.html">Error Handler</a></li><li class="menu-level-2"><a href="supporting-structure-routing.html">Routing</a></li><li class="menu-level-2"><a href="supporting-structure-sandbox.html">Sandbox</a></li><li class="menu-level-2"><a href="supporting-structure-service-provider.html">Service Provider</a></li><li class="menu-level-2"><a href="supporting-structure-storage.html">Storage</a></li><li class="menu-level-2"><a href="supporting-structure-unit-testing.html">Unit Testing</a></li><li class="menu-level-2"><a href="supporting-structure-validation.html">Validation</a></li></ul></li><li class="menu-level-1"><div class="nav-menu-title">Services</div><ul class="sidebar-level-2"><li class="menu-level-2"><a href="services-aliases.html">Aliases</a></li><li class="menu-level-2"><a href="services-auth.html">Auth</a></li><li class="menu-level-2"><a href="services-cache.html">Cache</a></li><li class="menu-level-2"><a href="services-db.html">DB</a></li><li class="menu-level-2"><a href="services-dispatcher.html">Dispatcher</a></li><li class="menu-level-2"><a href="services-filter.html">Filter</a></li><li class="menu-level-2"><a href="services-flash.html">Flash</a></li><li class="menu-level-2"><a href="services-flashbag.html">FlashBag</a></li><li class="menu-level-2"><a href="services-flysystem.html">Flysystem</a></li><li class="menu-level-2"><a href="services-lang.html">Lang</a></li><li class="menu-level-2"><a href="services-log.html">Log</a></li><li class="menu-level-2"><a href="services-mail.html">Mail</a></li><li class="menu-level-2"><a href="services-mongo.html">Mongo</a></li><li class="menu-level-2"><a href="services-redirect.html">Redirect</a></li><li class="menu-level-2"><a href="services-request.html">Request</a></li><li class="menu-level-2"><a href="services-response.html">Response</a></li><li class="menu-level-2"><a href="services-router.html">Router</a></li><li class="menu-level-2"><a href="services-session.html">Session</a></li><li class="menu-level-2"><a href="services-url.html">URL</a></li><li class="menu-level-2"><a href="services-view.html">View</a></li></ul></li><li class="menu-level-1"><div class="nav-menu-title">Misc.</div><ul class="sidebar-level-2"><li class="menu-level-2"><a href="misc-brood-console.html">Brood Console</a></li><li class="menu-level-2"><div class="nav-menu-title">Database</div><ul class="sidebar-level-3"><li class="menu-level-3"><a href="misc-database-factories.html">Factories</a></li><li class="menu-level-3"><a href="misc-database-migrations.html">Migrations</a></li></ul></li><li class="menu-level-2"><a href="misc-coding-style.html">Coding Style</a></li></ul></li></ul>

        </div>
        <div class="article col-md-9">
            <p>You&#039;ve probably learned how to use <a href="doc:mvc-controller">Controller</a>? Let&#039;s try on how explicitly create a route for your modules.</p>
<p>Routing is the place where you define how the system interact with the <strong>URL</strong> requests. Let&#039;s assume we have this page to login <code>example.app/login</code>.</p>
<h2>Advisable to know these firsts:</h2>
<ul>
<li><a target="_blank" href="/docs/mvc-module">Module</a></li>
<li><a target="_blank" href="/docs/mvc-controller">Controller</a></li>
<li><a target="_blank" href="/docs/mvc-view">View</a></li>
</ul>
<h2>Index:</h2>
<ul>
<li><a href="#basic-usage">Basic Usage</a></li>
<li><a href="#dynamic-route">Dynamic Route</a></li>
<li><a href="#naming-route">Naming Route</a></li>
<li><a href="#route-group">Route Group</a></li>
<li><a href="#learn-more">Learn More</a></li>
</ul>
<p><a name="basic-usage"></a></p>
<h1>Basic Usage</h1>
<p>under your <strong>project-name/app/main/routes.php</strong>, let&#039;s add this:</p>
<pre><code class="language-php">
route()->addGet(&#039;login&#039;, [
    &#039;controller&#039; => &#039;Auth&#039;,
    &#039;action&#039;     => &#039;showLogin&#039;,
]);
</code></pre>
<p>The above code shows how to create a <code>GET</code> request, the first parameter is the <code>`</code>/login<code>uri, and if you will be attempting to visit the page</code>example.app/login<code>`</code>, the dispatcher will analyze the request <strong>URI</strong>, if found a match, let us say it matches the route above.</p>
<p>The second parameter comes in, which we point it to <code>Auth</code> controller and the function <code>showLogin</code> will be called.</p>
<p>Go to <strong>project-name/app/main/controllers/AuthController.php</strong> and write the function like below:</p>
<pre><code class="language-php">namespace App\Main\Controllers;

class AuthController extends Controller
{
    public function showLogin()
    {
        return view(&#039;auth.login&#039;);
    }
}
</code></pre>
<p>The above code will be triggered once the url is visited, then we call the <code>view()</code> function to show our template engine file.</p>
<hr />
<p><a name="dynamic-route"></a></p>
<h1>Dynamic Route</h1>
<p>You&#039;ve learned the basic, now let&#039;s move on to this dynamic route.</p>
<pre><code class="language-php">route()->addGet(&#039;users/{id}/edit&#039;, [
    &#039;controller&#039; => &#039;User&#039;,
    &#039;action&#039;     => &#039;edit&#039;,
]);
</code></pre>
<p>and here is the controller sample</p>
<pre><code class="language-php">
namespace App\Main\Controllers;

class UserController extends Controller
{
    public function edit($id)
    {
        # do a model query using the $id passed in
        dd($id);
    }
}
</code></pre>
<p>The above codes show how to handle url values, so attempting to run this url to your browser <code>example.app/users/1/edit</code>.</p>
<p>It should die-and-dump the <code>$id</code> which value is <strong>1</strong>.</p>
<hr />
<p><a name="naming-route"></a></p>
<h1>Naming Route</h1>
<p>Let&#039;s extend more about the <code>login</code> uri by adding <strong>addPost</strong> also.</p>
<p>Add a <code>setName(<name>)</code> chain on it.</p>
<pre><code class="language-php">route()->addPost(&#039;login&#039;, [
    &#039;controller&#039; => &#039;Auth&#039;,
    &#039;action&#039;     => &#039;attemptLogin&#039;,
])->setName(&#039;attemptLogin&#039;);
</code></pre>
<p>In your <code>controller</code> or <code>view</code>, you may call the function <code>route(&#039;showLogin&#039;)</code> to return the full url.</p>
<pre><code class="language-php">// ...
class ... extends ...
{
    public function showLogin()
    {
        $post_login_url = route(&#039;attemptLogin&#039;); // example.app/login

        return view(&#039;auth.showLogin&#039;)
            ->withPostLoginUrl($post_login_url);
    }

    public function attemptLogin()
    {
        // code...
    }
}
</code></pre>
<p>The code above shows how to get the full url by just getting the route name.</p>
<p>How about the route <code>users/{id}/edit</code>, let&#039;s inject a name <strong>userEdit</strong> in it, and call it this way by providing the <code>id</code> in the second parameter.</p>
<pre><code class="language-php">echo route(&#039;userEdit&#039;, [
    &#039;id&#039; => 100,
]);
</code></pre>
<p>It must return <code>example.app/users/100/edit</code>.</p>
<hr />
<p><a name="route-group"></a></p>
<h1>Route Group</h1>
<p>Route group is much more cleaner to use if you want to separate a scope into a class registrar </p>
<ul>
<li>having a url like this <code>http://example/users/../..</code> into <strong>UsersRoute</strong> class</li>
<li>as well <code>http://example/auth/..</code> into <strong>AuthRoute</strong> class</li>
</ul>
<p>Run this to your console:</p>
<pre><code class="language-shell">php brood app:route Users main
</code></pre>
<pre><code class="language-shell">> Crafting Route...
>    UsersRoutes.php created!
> Generating autoload files
</code></pre>
<p>The above command generates a <strong>UsersRoutes.php</strong> inside your <strong><em>main</em></strong> module.
Go to <strong>project-name/app/main/routes/UserRoutes.php</strong>, open the file, you should have this defined values.</p>
<pre><code class="language-php">namespace App\Main\Routes;

class UsersRoutes extends RouteGroup
{
    public function initialize()
    {
        $this->setPaths([
            &#039;namespace&#039; => &#039;App\Main\Controllers&#039;,
            &#039;controller&#039; => &#039;Users&#039;,
        ]);

        $this->setPrefix(&#039;/users&#039;);

        # - url as users/index
        $this->addGet(&#039;/index&#039;, [
            &#039;action&#039; => &#039;index&#039;
        ]);

        # - url as users/store
        $this->addPost(&#039;/store&#039;, [
            &#039;action&#039; => &#039;store&#039;
        ]);

        # - url as users/1/show
        $this->addGet(&#039;/{id}/show&#039;, [
            &#039;action&#039; => &#039;show&#039;
        ]);

        # - url as users/1/update
        $this->addPost(&#039;/{id}/update&#039;, [
            &#039;action&#039; => &#039;update&#039;
        ]);

        # - url as users/1/delete
        $this->addPost(&#039;/{id}/delete&#039;, [
            &#039;action&#039; => &#039;delete&#039;
        ]);
    }
}
</code></pre>
<p>Now register this class in your <strong>project-name/app/main/routes.php</strong>.</p>
<pre><code class="language-php">route()->mount(new App\Main\Routes\UsersRoutes);
</code></pre>
<p>Create the <code>UsersController</code> at <code>project-name/app/main/controllers</code> or execute the brood console command instead.</p>
<pre><code class="language-php">namespace App\Main\Controllers;

class UsersController extends Controller
{
    // add a function
}
</code></pre>
<p>That&#039;s it, and you should have a simple resource URL.</p>
<ul>
<li>/users/index</li>
<li>/users/store</li>
<li>/users/{id}/show</li>
<li>/users/{id}/update</li>
<li>/users/{id}/deleted</li>
</ul>
<hr />
<p><a name="learn-more"></a></p>
<h1>Learn More</h1>
<p>To learn more, I have this reference that shows how fully Phalcon routing works.</p>
<ul>
<li><a target="_blank" href="https://docs.phalconphp.com/en/latest/reference/routing.html"><a href="https://docs.phalconphp.com/en/latest/reference/routing.html</a>">https://docs.phalconphp.com/en/latest/reference/routing.html</a></a></li>
</ul>

        </div>
      </div>
    </div>
  </body>

  <script src="../.docs-compiled/assets/js/jquery.js"></script>
  <script src="../.docs-compiled/assets/js/bootstrap.js"></script>
</html>
