<!DOCTYPE html>
<html>
  <head>
    <title>Service Provider - Solid Layer Documentation</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="../.docs-compiled/assets/css/font-awesome.css">
    <link rel="stylesheet" href="../.docs-compiled/assets/css/slayer.css">
  </head>
  <body>
    <nav class="navbar">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="navbar-brand" href="#">S.layer</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li class="nav-link active-slayer"><a href="#">Documentation</a></li>
                <li class="nav-link"><a href="#">Forum</a></li>
                <li>
                    <form class="navbar-form navbar-left">
                        <div class="form-group has-feedback">
                            <input type="text" class="form-control" placeholder="Search">
                            <i class="glyphicon glyphicon-search form-control-feedback"></i>
                        </div>
                    </form>
                </li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container -->
</nav>    <div class="container">
      <div class="row">
        <div class="col-md-3 version">
          <div class="btn-group">
  <button type="button" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    v1.4.0 <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a href="#">v1.4.1</a></li>
    <li><a href="#">v1.4.2</a></li>
    <li><a href="#">v1.4.3</a></li>
    <li><a href="#">v1.4.4</a></li>
  </ul>
</div>
        </div>
        <div class="col-md-9">
            <h1>Service Provider</h1>
        </div>
      </div>
      <div class="row">
        <div class="sidebar col-md-3">
            <ul class="sidebar-level-1"><li class="menu-level-1"><div class="nav-menu-title">Prologue</div><ul class="sidebar-level-2"><li class="menu-level-2"><a href="prologue-change-log.html">Change Log</a></li><li class="menu-level-2"><a href="prologue-contribution-guide.html">Contribution Guide</a></li></ul></li><li class="menu-level-1"><div class="nav-menu-title">Setup</div><ul class="sidebar-level-2"><li class="menu-level-2"><a href="index.html">Installation</a></li><li class="menu-level-2"><a href="setup-configuration.html">Configuration</a></li></ul></li><li class="menu-level-1"><div class="nav-menu-title">Modular-MVC</div><ul class="sidebar-level-2"><li class="menu-level-2"><a href="modular-mvc-module.html">Module</a></li><li class="menu-level-2"><a href="modular-mvc-controller.html">Controller</a></li><li class="menu-level-2"><a href="modular-mvc-view.html">View</a></li><li class="menu-level-2"><a href="modular-mvc-model.html">Model</a></li></ul></li><li class="menu-level-1"><div class="nav-menu-title">Supporting Structure</div><ul class="sidebar-level-2"><li class="menu-level-2"><a href="supporting-structure-error-handler.html">Error Handler</a></li><li class="menu-level-2"><a href="supporting-structure-routing.html">Routing</a></li><li class="menu-level-2"><a href="supporting-structure-sandbox.html">Sandbox</a></li><li class="menu-level-2"><a href="supporting-structure-service-provider.html">Service Provider</a></li><li class="menu-level-2"><a href="supporting-structure-storage.html">Storage</a></li><li class="menu-level-2"><a href="supporting-structure-unit-testing.html">Unit Testing</a></li><li class="menu-level-2"><a href="supporting-structure-validation.html">Validation</a></li></ul></li><li class="menu-level-1"><div class="nav-menu-title">Services</div><ul class="sidebar-level-2"><li class="menu-level-2"><a href="services-aliases.html">Aliases</a></li><li class="menu-level-2"><a href="services-auth.html">Auth</a></li><li class="menu-level-2"><a href="services-cache.html">Cache</a></li><li class="menu-level-2"><a href="services-db.html">DB</a></li><li class="menu-level-2"><a href="services-dispatcher.html">Dispatcher</a></li><li class="menu-level-2"><a href="services-filter.html">Filter</a></li><li class="menu-level-2"><a href="services-flash.html">Flash</a></li><li class="menu-level-2"><a href="services-flashbag.html">FlashBag</a></li><li class="menu-level-2"><a href="services-flysystem.html">Flysystem</a></li><li class="menu-level-2"><a href="services-lang.html">Lang</a></li><li class="menu-level-2"><a href="services-log.html">Log</a></li><li class="menu-level-2"><a href="services-mail.html">Mail</a></li><li class="menu-level-2"><a href="services-mongo.html">Mongo</a></li><li class="menu-level-2"><a href="services-redirect.html">Redirect</a></li><li class="menu-level-2"><a href="services-request.html">Request</a></li><li class="menu-level-2"><a href="services-response.html">Response</a></li><li class="menu-level-2"><a href="services-router.html">Router</a></li><li class="menu-level-2"><a href="services-session.html">Session</a></li><li class="menu-level-2"><a href="services-url.html">URL</a></li><li class="menu-level-2"><a href="services-view.html">View</a></li></ul></li><li class="menu-level-1"><div class="nav-menu-title">Misc.</div><ul class="sidebar-level-2"><li class="menu-level-2"><a href="misc-brood-console.html">Brood Console</a></li><li class="menu-level-2"><div class="nav-menu-title">Database</div><ul class="sidebar-level-3"><li class="menu-level-3"><a href="misc-database-factories.html">Factories</a></li><li class="menu-level-3"><a href="misc-database-migrations.html">Migrations</a></li></ul></li><li class="menu-level-2"><a href="misc-coding-style.html">Coding Style</a></li></ul></li></ul>

        </div>
        <div class="article col-md-9">
            <p>We&#039;re building applications that has a single purpose in which it must be separated under your underlying app.</p>
<p>This page helps you to create your own service, or helps you on how to handle a service.</p>
<p>I you&#039;d read the <a href="doc:mvc-module">Module</a>, there is a sample to create your own service provider.</p>
<h3>Index</h3>
<ul>
<li><a href="#basic-usage">Basic Usage</a></li>
<li><a href="#relying-service">Relying on a Service</a></li>
<li><a href="#vendor">Vendor Publish</a></li>
</ul>
<hr />
<p><a name="basic-usage"></a></p>
<h1>Basic Usage</h1>
<p>To create a service, you must create a class, let&#039;s assume we&#039;re building a bridge to wrap a certain library.</p>
<p>Let&#039;s assume we have this package to be imported on our project jenssegers/agent, now we want to easily create a dependency injection for this project rather than having an instance everytime we need it.</p>
<pre><code class="language-shell">cd /var/www/my-slayer-agent/
mkdir src/
composer init
</code></pre>
<p>Now manage your composer, write the essential things. Upon doing that you might want to add this to your composer.json</p>
<pre><code class="language-json">    "autoload": {
        "psr-4": {
            "MySlayerAgent\\Agent\\": "src/"
        }
    }
</code></pre>
<p>Run the initial <code>composer dumpautoload</code> so that it will register as a psr4, it interprets your <code>src/</code> folder having this namespace <code>MySlayerAgent\Agent</code>. Let&#039;s create a class name it as <strong><em>AgentServiceProvider</em></strong></p>
<pre><code class="language-php">// root-folder/src/AgentServiceProvider.php
namespace MySlayerAgent\Agent;

use Jenssegers\Agent\Agent;
use Clarity\Providers\ServiceProvider;

class AgentServiceProvider extends ServiceProvider
{
    protected $alias = &#039;agent&#039;;
    protected $shared = false;

    public function register()
    {
        return new Agent;
    }
}
</code></pre>
<p>Register this clas inside <code>project-name/config/app.php</code> under <code>services</code>, as <strong>MySlayerAgent\Agent\AgentServiceProvider::class</strong></p>
<p>The above class will be injected as dependency using the alias <code>agent</code>, the register() function returns an instance of <code>\Jenssegers\Agent\Agent</code> in which you can call using the <code>di()</code> function.</p>
<pre><code class="language-php">di()->get(&#039;agent&#039;)->is(&#039;Windows&#039;);
di()->get(&#039;agent&#039;)->is(&#039;Firefox&#039;);
di()->get(&#039;agent&#039;)->is(&#039;iPhone&#039;);
di()->get(&#039;agent&#039;)->is(&#039;OS X&#039;);
di()->get(&#039;agent&#039;)->isAndroidOS();
di()->get(&#039;agent&#039;)->isNexus();
di()->get(&#039;agent&#039;)->isSafari();
di()->get(&#039;agent&#039;)->isMobile();
di()->get(&#039;agent&#039;)->isTablet();
di()->get(&#039;agent&#039;)->match(&#039;regexp&#039;);
di()->get(&#039;agent&#039;)->languages();
</code></pre>
<p>You could even create your own facade.</p>
<pre><code class="language-php">// root-folder/src/AgentFacade.php
namespace MySlayerAgent\Agent;

use Clarity\Facades\Facade;

class AgentFacade extends Facade
{
    protected static function getFacadeAccessor()
    {
        return &#039;agent&#039;;
    }
}
</code></pre>
<p>Register it as well at <code>app.php</code> config as <code>&#039;Agent&#039; => MySlayerAgent\Agent\AgentFacade::class</code></p>
<p>Now you can easily call it through this</p>
<pre><code class="language-php">\Agent::is(&#039;Windows&#039;);
\Agent::is(&#039;Firefox&#039;);
\Agent::is(&#039;iPhone&#039;);
\Agent::is(&#039;OS X&#039;);
\Agent::isAndroidOS();
\Agent::isNexus();
\Agent::isSafari();
\Agent::isMobile();
\Agent::isTablet();
\Agent::match(&#039;regexp&#039;);
\Agent::languages();
</code></pre>
<hr />
<p><a name="relying-service"></a></p>
<h1>Relying on a Service</h1>
<p>To rely on other services, there is a <code>boot()</code> function that you could call.</p>
<pre><code class="language-php">    public function boot()
    {
        # add some event manager and so on ...
        // di()->get(&#039;log&#039;)->...
    }
</code></pre>
<p>There is also an example, find <code>project-name/components/Providers/</code>, check the <code>Application.php</code> and <code>Dispatcher.php</code>, we call the dependency injection itself to create an event.</p>
<p><strong><em>Application.php:</em></strong></p>
<pre><code class="language-php">    public function boot()
    {
        $app = di()->get(&#039;application&#039;);

        $event_manager = new EventsManager;

        $event_manager->attach(&#039;application&#039;, new ApplicationEventListener);

        $app->setEventsManager($event_manager);
    }
</code></pre>
<hr />
<p><a name="vendor"></a></p>
<h1>Vendor Publish</h1>
<p>So you have files that you want to import from the root path of your project. There is an option to do that.</p>
<p>Under <code>boot()</code> function, you can call the <code>publish(<array folders>, <tag name>)</code> command.</p>
<pre><code class="language-php">    public function boot()
    {
        $this->publish([
            __DIR__.&#039;/resources/views&#039; => base_path(&#039;resources/views/vendor/popeye&#039;),
        ], &#039;view&#039;);
    
        $this->publish([
            __DIR__.&#039;/dist&#039; => base_path(),
        ], &#039;dist&#039;);
    }
</code></pre>
<p>The above code shows, on how you could publish your folders. Try to run this on your console. Here&#039;s the console format <code>php brood vendor:publish <provider alias></code>, and there is a <em>tag</em> option.</p>
<pre><code class="language-php">php brood vendor:publish popeye
</code></pre>
<p>The above console command will iterate all the registered tags and requires you to confirm one-by-one.</p>
<p>To make a specific publish, you can add <code>--tag</code> in the command</p>
<pre><code class="language-php">php brood vendor:publish popeye --tag=dist
</code></pre>

        </div>
      </div>
    </div>
  </body>

  <script src="../.docs-compiled/assets/js/jquery.js"></script>
  <script src="../.docs-compiled/assets/js/bootstrap.js"></script>
</html>
